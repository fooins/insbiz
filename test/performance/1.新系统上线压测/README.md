# 新系统上线压测

压测目的：新系统上线压测以探知系统能力。  
使用工具：[JMeter(5.5)](https://github.com/itabbot/learn/blob/main/性能测试/1.测试工具/1.1.JMeter.md)  
系统版本：[Insbiz 1.0.0](../../../releases/v1.0.0)  
最终结论：

## 目标

- 每秒处理交易数达到 10 TPS。
- 接口平均响应时长小于 3 秒。
- 接口成功率不低于 99.4%。

## 方案

准备工作：

- 压测环境：直接在生产环境测试，最后重置数据。
- 业务模型：报价、承保、保单查询以及理赔申请各接口请求量比例为 `2:4:2:1`。
- 串联链路：先执行报价，然后承保，成功后查询保单；理赔申请单独触发不串联。
- 数据量：构造一年左右数据，约 800 万保单和 400 万理赔单。

压测监控：

- 是否影响整体功能的正常使用。
- TPS 曲线是否稳定，有无大幅度波动。
- 操作系统各指标是否正常：CPU、内存、磁盘吞吐量和网络吞吐量。
- 数据库各指标是否正常：SQL 耗时、命中率、锁等待次数和锁等待时间。
